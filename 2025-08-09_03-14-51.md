Pi Zero, INMP441 Mic + MAX98357A Speaker

I tried to get an INMP441 I²S mic and a MAX98357A I²S DAC working together as one soundcard on a Pi Zero. This turned into a rabbit hole because of how Linux ALSA/ASoC expects audio hardware to be structured.

ASoC wants a full codec – In audio, a “codec” (coder/decoder) chip usually has both an ADC (mic input) and DAC (speaker output) plus control registers accessed over I²C/SPI. The kernel has a codec driver for each chip. The driver tells ALSA what the hardware can do and manages clocks, formats, mute, etc.

My hardware is two halves of a codec –

MAX98357A = DAC only, has a driver (snd-soc-max98357a) ✅

INMP441 = ADC only, no control interface, no driver ❌

Without a codec driver for the mic, the kernel doesn’t recognise it as a capture device, so arecord -l stays empty for input.

In the Google Voice HAT case, both mic and speaker are wrapped in a single codec driver (googlevoicehat-codec), so ALSA sees one full-duplex soundcard.

Trying to glue my DAC and mic together with a simple-audio-card or audio-graph-card overlay fails because:

Both need to be modelled as codecs in DT.

The mic has no kernel codec driver to bind to.

The kernel can’t make a capture link without that driver.

Codec drivers live in the kernel, not as user-space packages I can “install.” If there’s no driver, the only options are to write one, fake the mic as another supported chip, or use different hardware.

Key takeaway: ALSA doesn’t just pass raw I²S around — it wants to see a CPU DAI ↔ codec ↔ CPU DAI path with drivers at both ends. My mic is invisible to ALSA because it’s missing that middle layer. The MAX98357A works for playback because it has a driver, but pairing it with INMP441 for full-duplex requires either a proper mic codec driver or hardware that combines ADC + DAC in one supported chip.

Practical fix next time:

If I need both mic and speaker on one I²S bus, get a single supported codec (WM8960, WM8731, etc.) or use USB for the mic and keep I²S for the DAC.